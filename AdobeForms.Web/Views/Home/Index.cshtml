@model AdobeForms.Web.Models.IndexViewModel

<script src="~/Scripts/adobeforms.js"></script>

<script type="text/javascript">
    function LoadDynamicInputData() {

        var selectedText = $('#baseFormIdString').find("option:selected").attr("id");

        selectedText = "c:\\dev\\navigate\\forms\\exc\\documents\\" + selectedText;
        //selectedText = "c:\\dev\\formslibrary\\exc\\documents\\" + selectedText;

        $("#result")
            .load("http://localhost/AdobeForms.Web/api/AdobeForm/GetForm", "adobeFormName=" + selectedText.toString(), function (response, status, xhr) {
                if (status === "error") {
                    var msg = "Sorry but there was an error: ";
                    $("#error").html(msg + xhr.status + " " + xhr.statusText);
                }
            });
    }

    function SendToServer() {

        var dataArray = [];
        $.each($('#result :input').serializeArray(), function () {
            dataArray.push({ Name: this.name, Value: this.value });
        });

        $.ajax({
            type: "POST",
            url: "http://localhost/AdobeForms.Web/api/AdobeForm/SaveForm",
            data: JSON.stringify(dataArray),
            success: function () { alert('Sent...'); },
            contentType: "application/json; charset=utf-8",
            dataType: "json"
        });

    }
</script>

<div class="jumbotron">
    <h1>AdobeForms.Web</h1>
    <br />
    <p class="lead">Load dynamic input data for forms with user fill-ins.</p>
    <br />
    <div class="form-group form-group-lg">
        <label for=""></label>
        <select class="form-control" id="baseFormIdString">
            @foreach (var form in Model.Forms)
            {
                <option id="@form.AdobeId">@form.FormIdString</option>
            }
        </select>
    </div>
    <br />
    <p><a href="javascript:LoadDynamicInputData()" class="btn btn-primary btn-lg">Load Dynamic Input Data &raquo;</a></p>
    <br />
</div>
<div class="panel panel-default">
    <div id="result"></div>
    <button type="button" class="btn btn-lg btn-primary" onclick="SendToServer()">Save</button>
</div>
